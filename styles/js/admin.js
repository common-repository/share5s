jQuery(document).ready(function(e){var a=0,s={},l=e("#share5s-upload"),r=l.html();e("#share5sFileManager").on("change",".selected-ids",function(){e(this).is(":checked")?e(this).closest("li").addClass("selected"):e(this).closest("li").removeClass("selected"),n()}),e("#share5sFileManager").on("click","#share5s-delete-item",function(){if(e("#share5sFileManager li.selected").length<=0)return alert(langvars.no_selected),!1;let s=e("#share5sFileManager li.item-folder .selected-ids:checked").map(function(){return e(this).val()}).get(),l=e("#share5sFileManager li.item-file .selected-ids:checked").map(function(){return e(this).val()}).get();confirm(langvars.delete_question)&&e.ajax({type:"POST",url:langvars.ajaxurl,dataType:"json",data:{action:"share5s_ajax_request",load:"delete_items",security:langvars.ajax_nonce,folders:s,files:l},success:function(e){if("error"===e.status)return alert(e.message),!1;o(a)},error:function(e){console.log(e)}})}),e("#share5sFileManager").on("click","li.item-folder a",function(){let s=e(this).closest("li").data("fileid");a=s,o(s)}),e("#share5sFileManager").on("click",".share5-back",function(){o(0)}),e("#share5sFileManager").on("click","#share5s-show-link",function(){e("#share5s-modal").show()}),e("#share5s-modal").on("click",".close",function(){e("#share5s-modal").hide()}),e("#share5sFileManager").on("click","#share5s-selected-all",function(){e("#share5sFileManager .fileListing li").addClass("selected"),e("#share5sFileManager .fileListing li .selected-ids").prop("checked",!0),e(this).attr("id","share5s-unselected-all"),n()}),e("#share5sFileManager").on("click","#share5s-unselected-all",function(){e("#share5sFileManager .fileListing li").removeClass("selected"),e("#share5sFileManager .fileListing li .selected-ids").prop("checked",!1),e(this).attr("id","share5s-selected-all"),n()}),e("#share5sFileManager").on("click","#share5s-show-link",function(){let a=e("#share5sFileManager li.selected"),s="";e("#share5s-modal .modal-title").html(langvars.file_folder_link),e("#share5s-modal .share5s-modal-footer").html(""),e.each(a,function(a,l){s+='<li><a target="_blank" href="'+e(this).data("fullurl")+'">'+e(this).data("fullurl")+"</a></li>"}),e("#share5s-modal .share5s-modal-body").html("<ul>"+s+"</ul>"),e("#share5s-modal").show()}),e("#share5sFileManager").on("click","#share5s-add-folder",function(){let s=e(this),l=e(this).html();s.prop("disabled",!0),s.html(langvars.loading),e.ajax({type:"POST",url:langvars.ajaxurl,dataType:"html",data:{action:"share5s_ajax_request",load:"load_modal",security:langvars.ajax_nonce,template:"form_add_folder",current_folder:a},success:function(a){e("#share5s-modal .share5s-modal-body").html(a),e("#share5s-modal .share5s-modal-footer").html('<button type="button" class="btn btn-info" id="btn-add-folder"><i class="entypo-check"></i> '+langvars.add_folder+"</button>"),e("#share5s-modal").show(),s.html(l)},error:function(e){console.log(e)}})}),e("#share5sFileManager").on("click","#enablePassword",function(){e(this).is(":checked")?e("#share5sFileManager #form-add-folder #password").prop("readonly",!1):e("#share5sFileManager #form-add-folder #password").prop("readonly",!0)}),e("#share5sFileManager").on("click","#btn-add-folder",function(){let s=e("#share5sFileManager #form-add-folder").serialize();s+="&action=share5s_ajax_request&load=add_folder&security="+langvars.ajax_nonce,e.ajax({type:"POST",url:langvars.ajaxurl,dataType:"html",data:s,success:function(s){e("#share5s-modal").hide(),o(a)},error:function(e){console.log(e)}})}),e("#share5sFileManager").on("click","#share5s-upload",function(){s.session_id&&s.folder_id?e("#share5s-form-upload").show("slow"):(l.prop("disabled",!0),l.html('<i class="entypo-upload"></i> Please wait...'),e.ajax({type:"POST",url:langvars.ajaxurl,dataType:"json",data:{action:"share5s_ajax_request",load:"before_upload_setup",security:langvars.ajax_nonce,current_folder:a},success:function(a){"success"===a._status?(s.session_id=a.session,s.folder_id=a.folder,e("#share5s-form-upload").show("slow")):alert(a.message),l.prop("disabled",!1),l.html(r)}}))});var i=new Resumable({target:langvars.uploadurl,query:function(){return s},chunkSize:1048576,testChunks:!1,simultaneousUploads:1,permanentErrors:[400,401,402,403,404,409,413,415,500,503,507],maxChunkRetries:10});function t(a=1){1===a?e("#share5sFileManager #share5s-loading").show():e("#share5sFileManager #share5s-loading").hide()}function n(){e("#share5sFileManager li.selected").length>0?e("#share5sFileManager .btn-active-selected").removeClass("disabled").prop("disabled",!1):e("#share5sFileManager .btn-active-selected").addClass("disabled").prop("disabled",!0)}function o(a){t(1),e.ajax({type:"POST",url:langvars.ajaxurl,dataType:"json",data:{action:"share5s_ajax_request",load:"load_folder",security:langvars.ajax_nonce,folder_id:a},success:function(a){if("error"===a.status)return alert(a.message),!1;e("#share5sFileManager .fileListing").html(""),e.each(a.data.folders,function(a,s){let l='<li data-title="'+s.folderName+'" data-sizeraw="" data-uploaddate="" data-fullurl="'+s.url_folder+'" data-filename="'+s.folderName+'" data-statsurl="" data-urlhtmlcode="" data-urlbbcode="[url]'+s.url_folder+'[/url]" data-extramenuitems="" title="'+s.folderName+'" data-fileid="'+s.id+'" class="image-thumb item-folder fileItem'+s.id+' fileIconLi ui-draggable">\n   <div class="thumbIcon"><a name="link"><img src="https://share5s.com/themes/flow/images/folder_'+(0==s.isPublic?"lock_":"")+'fm_grid.png" alt="" class="#"></a></div>\n   <span class="filename">'+s.folderName+" "+(s.file_count>0?"("+s.file_count+")":"")+'</span>\n   <div class="fileOptions"><input type="checkbox" class="selected-ids" value="'+s.id+'"></div>\n</li>';e("#share5sFileManager .fileListing").append(l)}),e.each(a.data.files,function(a,s){let l='<li data-title="'+s.filename+'" data-sizeraw="'+s.fileSize+'" data-uploaddate="" data-fullurl="'+s.url_file+'" data-filename="'+s.filename+'" data-statsurl="'+s.url_file+'~s" data-urlhtmlcode="&amp;lt;a href=&amp;quot;'+s.url_file+"&amp;quot; target=&amp;quot;_blank&amp;quot; title=&amp;quot;Download from Free File Upload and Sharing&amp;quot;&amp;gt;"+s.filename+'&amp;lt;/a&amp;gt;" data-urlbbcode="[url]'+s.url_file+'[/url]" data-extramenuitems="" title="'+s.filename+' (432.38 KB)" data-fileid="'+s.id+'" class="image-thumb item-file fileItem'+s.id+' fileIconLi ui-draggable">\n   <div class="thumbIcon"><a name="link"><img src="'+s.thumbnail+'" alt="" class="#"></a></div>\n   <span class="filename">'+s.filename+'</span>\n   <div class="fileOptions"><input type="checkbox" class="selected-ids" value="'+s.id+'"></div>\n</li>';e("#share5sFileManager .fileListing").append(l)}),t(0)},error:function(e){console.log(e)}})}i.on("fileError",function(e,a){delete s.upload_id;var l=jQuery.parseJSON(a);alert("Error: "+e.file.name+" "+l.error.message)}),i.on("fileProgress",function(a,l){if(l)try{(l=JSON.parse(l))&&l.upload_id&&(s.upload_id=l.upload_id)}catch(e){}e("#share5sFileManager #share5s-form-upload .item-"+a.uniqueIdentifier+" .file-progress-bar").attr("style","width: "+Math.floor(100*a.progress())+"%")}),i.on("progress",function(a){var s=100*i.progress(),l=Math.ceil(s);e("#share5s-progress .share5s-progress-bar").css("width",l+"%");new Date}),i.on("complete",function(){delete s.upload_id,uploadComplete=!0,e.ajax({type:"POST",url:langvars.ajaxurl,dataType:"json",data:{action:"share5s_ajax_request",load:"after_upload_setup",security:langvars.ajax_nonce,current_folder:a},success:function(e){"success"===e._status?o(a):alert(e.message)},done:function(e){}})}),i.support?(i.assignDrop(e("#share5s-drop-upload")),i.assignBrowse(e("#share5s-drop-upload")),i.on("fileAdded",function(a){let s='<div class="upload-item item-'+a.file.uniqueIdentifier+'">\n            <div class="file-name"> '+a.file.name+' <span class="file-size">'+function(e){var a=parseInt(e);if(a<1024)return a+" B";if(a<1048576)return Math.round(a/1024,2)+" KB";if(a<1073741824)return Math.round(a/1024/1024,2)+" MB";return Math.round(a/1024/1024/1024,2)+" GB"}(a.file.size)+'</span></div>\n                <div class="file-progress">\n                    <div class="file-progress-bar"></div>\n                </div>\n        </div>';e("#share5s-file-list").append(s),uploadComplete=!1;var l=new Date;l.getTime(),i.getSize(),startTime=l.getTime(),i.upload()})):alert("Your browser does not support javascript, please turn on javascript and try again"),"share5s-load"===function(e){for(var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<a.length;s++){var l=a[s].split("=");if(l[0]==e)return l[1]}}("page")&&o(a)});